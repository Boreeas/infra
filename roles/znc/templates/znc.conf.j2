// WARNING
//
// Do NOT edit this file while ZNC is running!
// Use webadmin or *controlpanel instead.
//
// Altering this file by hand will forfeit all support.
//
// But if you feel risky, you might want to read help on /znc saveconfig and /znc rehash.
// Also check http://en.znc.in/wiki/Configuration

Version = 1.6.5
AnonIPLimit = 16
SSLCertFile = /etc/ssl/{{ znc_host }}.crt
SSLKeyFile = /etc/ssl/{{ znc_host }}.key

{% for setting in znc_settings %}
{{ setting }}
{% endfor %}

{% for listener in znc_listeners %}
<Listener l{{ loop.index }}>
    Port = {{ listener["port"] }}
    IPv4 = {{ listener["ipv4"] if "ipv4" in listener else true }}
    IPv6 = {{ listener["ipv6"] if "ipv6" in listener else true }}
    SSL = {{ listener["ssl"] if "ssl" in listener else true }}
</Listener>
{% endfor %}

LoadModule = webadmin
{% for mod in znc_modules %}
LoadModule = {{ mod }}
{% endfor %}

{% for user in znc_users %}
<User {{ user["name"] }}>
    <Pass password>
        Method = {{ znc_passwords[user["name"]]["method"] }}
        Hash   = {{ znc_passwords[user["name"]]["hash"] }}
        Salt   = {{ znc_passwords[user["name"]]["salt"] }}
    </Pass>
    Admin      = {{ user["admin"] if "admin" in user else false }}
    Nick       = {{ user["name"] }}
    AltNick    = {{ user["altname"] if "altname" in user else user["name"] + "_"}}
    Ident      = {{ user["ident"] if "ident" in user else user["name"] }}
    RealName   = {{ user["realname"] if "realname" in user else "[REDACTED]" }}

    {% for setting in (user["settings"] if "settings" in user else []) %}
    {{ setting }}
    {% endfor %}

    {% for module in (user["modules"] if "modules" in user else []) %}
    LoadModule = {{ module }}
    {% endfor %}

    {% for network in (user["networks"] if "networks" in user else []) %}
    <Network {{ network["name"] }}>
        Server     = {{ network["address"] }} {{ '+' if ('ssl' in network and network['ssl']) else '' }}{{ network["port"] }}
        {% for module in (network["modules"] if "modules" in network else []) %}
        LoadModule = {{ module }}
        {% endfor %}
        {% for setting in (network["settings"] if "settings" in network else []) %}
        {{ setting }}
        {% endfor %}
        {% for chan in (network["chans"] if "chans" in network else []) %}
        <Chan #{{chan["name"]}}>
            {% for setting in (chan["settings"] if "settings" in chan else []) %}
            {{ setting }}
            {% endfor %}
        </Chan>
        {% endfor %}
    </Network>
    {% endfor %}
</User>
{% endfor %}
